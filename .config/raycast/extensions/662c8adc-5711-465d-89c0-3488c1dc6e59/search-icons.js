"use strict";var Je=Object.create;var Z=Object.defineProperty;var He=Object.getOwnPropertyDescriptor;var Ze=Object.getOwnPropertyNames;var qe=Object.getPrototypeOf,Qe=Object.prototype.hasOwnProperty;var Ye=(e,r)=>{for(var t in r)Z(e,t,{get:r[t],enumerable:!0})},me=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of Ze(r))!Qe.call(e,a)&&a!==t&&Z(e,a,{get:()=>r[a],enumerable:!(n=He(r,a))||n.enumerable});return e};var O=(e,r,t)=>(t=e!=null?Je(qe(e)):{},me(r||!e||!e.__esModule?Z(t,"default",{value:e,enumerable:!0}):t,e)),Xe=e=>me(Z({},"__esModule",{value:!0}),e);var Ct={};Ye(Ct,{default:()=>It});module.exports=Xe(Ct);var A=require("@raycast/api"),Be=require("react");var Pe=require("@raycast/api");var d=O(require("react")),y=require("@raycast/api");var ge=Object.prototype.hasOwnProperty;function q(e,r){var t,n;if(e===r)return!0;if(e&&r&&(t=e.constructor)===r.constructor){if(t===Date)return e.getTime()===r.getTime();if(t===RegExp)return e.toString()===r.toString();if(t===Array){if((n=e.length)===r.length)for(;n--&&q(e[n],r[n]););return n===-1}if(!t||typeof e=="object"){n=0;for(t in e)if(ge.call(e,t)&&++n&&!ge.call(r,t)||!(t in r)||!q(e[t],r[t]))return!1;return Object.keys(r).length===n}}return e!==e&&r!==r}var N=O(require("node:fs")),X=O(require("node:path")),ve=O(require("node:crypto")),Se=O(require("node:child_process")),Ee=require("node:buffer"),j=O(require("node:stream")),Re=require("node:util");var Ie=require("react/jsx-runtime");var te=globalThis;function et(e){let r=(0,d.useRef)(e),t=(0,d.useRef)(0);return q(e,r.current)||(r.current=e,t.current+=1),(0,d.useMemo)(()=>r.current,[t.current])}function S(e){let r=(0,d.useRef)(e);return r.current=e,r}function D(e,r){let t=e instanceof Error?e.message:String(e);return(0,y.showToast)({style:y.Toast.Style.Failure,title:r?.title??"Something went wrong",message:r?.message??t,primaryAction:r?.primaryAction??be(e),secondaryAction:r?.primaryAction?be(e):void 0})}var be=e=>{let r=!0,t="[Extension Name]...",n="";try{let s=JSON.parse((0,N.readFileSync)((0,X.join)(y.environment.assetsPath,"..","package.json"),"utf8"));t=`[${s.title}]...`,n=`https://raycast.com/${s.owner||s.author}/${s.name}`,(!s.owner||s.access==="public")&&(r=!1)}catch{}let a=y.environment.isDevelopment||r,i=e instanceof Error?e?.stack||e?.message||"":String(e);return{title:a?"Copy Logs":"Report Error",onAction(s){s.hide(),a?y.Clipboard.copy(i):(0,y.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(t)}&extension-url=${encodeURI(n)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${i}
\`\`\`
`)}`)}}};function ce(e,r,t){let n=(0,d.useRef)(0),[a,i]=(0,d.useState)({isLoading:!0}),s=S(e),o=S(t?.abortable),c=S(r||[]),u=S(t?.onError),l=S(t?.onData),f=S(t?.onWillExecute),m=S(t?.failureToastOptions),b=S(a.data),p=(0,d.useRef)(null),h=(0,d.useRef)({page:0}),x=(0,d.useRef)(!1),E=(0,d.useRef)(!0),P=(0,d.useRef)(50),v=(0,d.useCallback)(()=>(o.current&&(o.current.current?.abort(),o.current.current=new AbortController),++n.current),[o]),w=(0,d.useCallback)((..._)=>{let R=v();f.current?.(_),i(g=>({...g,isLoading:!0}));let V=tt(s.current)(..._);function W(g){return g.name=="AbortError"||R===n.current&&(u.current?u.current(g):y.environment.launchType!==y.LaunchType.Background&&D(g,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(L){L.hide(),p.current?.(...c.current||[])}},...m.current}),i({error:g,isLoading:!1})),g}return typeof V=="function"?(x.current=!0,V(h.current).then(({data:g,hasMore:L,cursor:Ge})=>(R===n.current&&(h.current&&(h.current.cursor=Ge,h.current.lastItem=g?.[g.length-1]),l.current&&l.current(g,h.current),L&&(P.current=g.length),E.current=L,i(Ke=>h.current.page===0?{data:g,isLoading:!1}:{data:(Ke.data||[])?.concat(g),isLoading:!1})),g),g=>(E.current=!1,W(g)))):(x.current=!1,V.then(g=>(R===n.current&&(l.current&&l.current(g),i({data:g,isLoading:!1})),g),W))},[l,u,c,s,i,p,f,h,m,v]);p.current=w;let I=(0,d.useCallback)(()=>{h.current={page:0};let _=c.current||[];return w(..._)},[w,c]),C=(0,d.useCallback)(async(_,R)=>{let V;try{if(R?.optimisticUpdate){v(),typeof R?.rollbackOnError!="function"&&R?.rollbackOnError!==!1&&(V=structuredClone(b.current?.value));let W=R.optimisticUpdate;i(g=>({...g,data:W(g.data)}))}return await _}catch(W){if(typeof R?.rollbackOnError=="function"){let g=R.rollbackOnError;i(L=>({...L,data:g(L.data)}))}else R?.optimisticUpdate&&R?.rollbackOnError!==!1&&i(g=>({...g,data:V}));throw W}finally{R?.shouldRevalidateAfter!==!1&&(y.environment.launchType===y.LaunchType.Background||y.environment.commandMode==="menu-bar"?await I():I())}},[I,b,i,v]),U=(0,d.useCallback)(()=>{h.current.page+=1;let _=c.current||[];w(..._)},[h,c,w]);(0,d.useEffect)(()=>{h.current={page:0},t?.execute!==!1?w(...r||[]):v()},[et([r,t?.execute,w]),o,h]),(0,d.useEffect)(()=>()=>{v()},[v]);let G=t?.execute!==!1?a.isLoading:!1,K={...a,isLoading:G},H=x.current?{pageSize:P.current,hasMore:E.current,onLoadMore:U}:void 0;return{...K,revalidate:I,mutate:C,pagination:H}}function tt(e){return e===Promise.all||e===Promise.race||e===Promise.resolve||e===Promise.reject?e.bind(Promise):e}function ye(e){return typeof e!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(e))!==null}function rt(e){return e instanceof URLSearchParams?e.toString():e}function Ce(e,r=[]){function t(n){return"update"in e?e.update(n,"utf8"):e.write(n)}return{dispatch:function(n){n=rt(n),n===null?this._null():this["_"+typeof n](n)},_object:function(n){let a=/\[object (.*)\]/i,i=Object.prototype.toString.call(n),s=a.exec(i)?.[1]??"unknown:["+i+"]";s=s.toLowerCase();let o=null;if((o=r.indexOf(n))>=0){this.dispatch("[CIRCULAR:"+o+"]");return}else r.push(n);if(Buffer.isBuffer(n))return t("buffer:"),t(n.toString("utf8"));if(s!=="object"&&s!=="function"&&s!=="asyncfunction")if(this["_"+s])this["_"+s](n);else throw new Error('Unknown object type "'+s+'"');else{let c=Object.keys(n);c=c.sort(),ye(n)||c.splice(0,0,"prototype","__proto__","constructor"),t("object:"+c.length+":");let u=this;return c.forEach(function(l){u.dispatch(l),t(":"),u.dispatch(n[l]),t(",")})}},_array:function(n,a){a=typeof a<"u"?a:!1;let i=this;if(t("array:"+n.length+":"),!a||n.length<=1){n.forEach(function(c){i.dispatch(c)});return}let s=[],o=n.map(function(c){let u=nt(),l=r.slice();return Ce(u,l).dispatch(c),s=s.concat(l.slice(r.length)),u.read().toString()});r=r.concat(s),o.sort(),this._array(o,!1)},_date:function(n){t("date:"+n.toJSON())},_symbol:function(n){t("symbol:"+n.toString())},_error:function(n){t("error:"+n.toString())},_boolean:function(n){t("bool:"+n.toString())},_string:function(n){t("string:"+n.length+":"),t(n.toString())},_function:function(n){t("fn:"),ye(n)?this.dispatch("[native]"):this.dispatch(n.toString()),this.dispatch("function-name:"+String(n.name)),this._object(n)},_number:function(n){t("number:"+n.toString())},_xml:function(n){t("xml:"+n.toString())},_null:function(){t("Null")},_undefined:function(){t("Undefined")},_regexp:function(n){t("regex:"+n.toString())},_uint8array:function(n){t("uint8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint8clampedarray:function(n){t("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(n))},_int8array:function(n){t("int8array:"),this.dispatch(Array.prototype.slice.call(n))},_uint16array:function(n){t("uint16array:"),this.dispatch(Array.prototype.slice.call(n))},_int16array:function(n){t("int16array:"),this.dispatch(Array.prototype.slice.call(n))},_uint32array:function(n){t("uint32array:"),this.dispatch(Array.prototype.slice.call(n))},_int32array:function(n){t("int32array:"),this.dispatch(Array.prototype.slice.call(n))},_float32array:function(n){t("float32array:"),this.dispatch(Array.prototype.slice.call(n))},_float64array:function(n){t("float64array:"),this.dispatch(Array.prototype.slice.call(n))},_arraybuffer:function(n){t("arraybuffer:"),this.dispatch(new Uint8Array(n))},_url:function(n){t("url:"+n.toString())},_map:function(n){t("map:");let a=Array.from(n);this._array(a,!0)},_set:function(n){t("set:");let a=Array.from(n);this._array(a,!0)},_file:function(n){t("file:"),this.dispatch([n.name,n.size,n.type,n.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){t("domwindow")},_bigint:function(n){t("bigint:"+n.toString())},_process:function(){t("process")},_timer:function(){t("timer")},_pipe:function(){t("pipe")},_tcp:function(){t("tcp")},_udp:function(){t("udp")},_tty:function(){t("tty")},_statwatcher:function(){t("statwatcher")},_securecontext:function(){t("securecontext")},_connection:function(){t("connection")},_zlib:function(){t("zlib")},_context:function(){t("context")},_nodescript:function(){t("nodescript")},_httpparser:function(){t("httpparser")},_dataview:function(){t("dataview")},_signal:function(){t("signal")},_fsevent:function(){t("fsevent")},_tlswrap:function(){t("tlswrap")}}}function nt(){return{buf:"",write:function(e){this.buf+=e},end:function(e){this.buf+=e},read:function(){return this.buf}}}function at(e,r){let t=this[e];return t instanceof Date?`__raycast_cached_date__${t.toISOString()}`:Buffer.isBuffer(t)?`__raycast_cached_buffer__${t.toString("base64")}`:r}function st(e,r){return typeof r=="string"&&r.startsWith("__raycast_cached_date__")?new Date(r.replace("__raycast_cached_date__","")):typeof r=="string"&&r.startsWith("__raycast_cached_buffer__")?Buffer.from(r.replace("__raycast_cached_buffer__",""),"base64"):r}function Y(e){let r=ve.default.createHash("sha1");return Ce(r).dispatch(e),r.digest("hex")}var it=Symbol("cache without namespace"),$e=new Map;function ot(e,r,t){let n=t?.cacheNamespace||it,a=$e.get(n)||$e.set(n,new y.Cache({namespace:t?.cacheNamespace})).get(n);if(!a)throw new Error("Missing cache");let i=S(e),s=S(r),o=(0,d.useSyncExternalStore)(a.subscribe,()=>{try{return a.get(i.current)}catch(f){console.error("Could not get Cache data:",f);return}}),c=(0,d.useMemo)(()=>{if(typeof o<"u"){if(o==="undefined")return;try{return JSON.parse(o,st)}catch(f){return console.warn("The cached data is corrupted",f),s.current}}else return s.current},[o,s]),u=S(c),l=(0,d.useCallback)(f=>{let m=typeof f=="function"?f(u.current):f;if(typeof m>"u")a.set(i.current,"undefined");else{let b=JSON.stringify(m,at);a.set(i.current,b)}return m},[a,i,u]);return[c,l]}var z=Symbol();function ct(e,r,t){let{initialData:n,keepPreviousData:a,internal_cacheKeySuffix:i,...s}=t||{},o=(0,d.useRef)(null),[c,u]=ot(Y(r||[])+i,z,{cacheNamespace:Y(e)}),l=(0,d.useRef)(c!==z?c:n),f=(0,d.useRef)(void 0),{mutate:m,revalidate:b,...p}=ce(e,r||[],{...s,onData(v,w){f.current=w,s.onData&&s.onData(v,w),!(w&&w.page>0)&&(o.current="promise",l.current=v,u(v))}}),h,x=p.pagination;f.current&&f.current.page>0&&p.data?h=p.data:o.current==="promise"?h=l.current:a&&c!==z?(h=c,x&&(x.hasMore=!0,x.pageSize=c.length)):a&&c===z?h=l.current:c!==z?(h=c,x&&(x.hasMore=!0,x.pageSize=c.length)):h=n;let E=S(h),P=(0,d.useCallback)(async(v,w)=>{let I;try{if(w?.optimisticUpdate){typeof w?.rollbackOnError!="function"&&w?.rollbackOnError!==!1&&(I=structuredClone(E.current));let C=w.optimisticUpdate(E.current);o.current="cache",l.current=C,u(C)}return await m(v,{shouldRevalidateAfter:w?.shouldRevalidateAfter})}catch(C){if(typeof w?.rollbackOnError=="function"){let U=w.rollbackOnError(E.current);o.current="cache",l.current=U,u(U)}else w?.optimisticUpdate&&w?.rollbackOnError!==!1&&(o.current="cache",l.current=I,u(I));throw C}},[u,m,E,l,o]);return(0,d.useEffect)(()=>{c!==z&&(o.current="cache",l.current=c)},[c]),{data:h,isLoading:p.isLoading,error:p.error,mutate:f.current&&f.current.page>0?m:P,pagination:x,revalidate:b}}function lt(e){if(e){let r=ft(e);if(!r)return!1;if(r.subtype==="json"||r.suffix==="json"||r.suffix&&/\bjson\b/i.test(r.suffix)||r.subtype&&/\bjson\b/i.test(r.subtype))return!0}return!1}var ut=/^([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126});?$/;function ft(e){let r=e.indexOf(";"),t=r!==-1?e.slice(0,r).trim():e.trim(),n=ut.exec(t.toLowerCase().toLowerCase());if(!n)return;let a=n[1],i=n[2],s,o=i.lastIndexOf("+");return o!==-1&&(s=i.substring(o+1),i=i.substring(0,o)),{type:a,subtype:i,suffix:s}}async function dt(e){if(!e.ok)throw new Error(e.statusText);let r=e.headers.get("content-type");return r&&lt(r)?await e.json():await e.text()}function ht(e){return{data:e,hasMore:!1}}function Ae(e,r){let{parseResponse:t,mapResult:n,initialData:a,execute:i,keepPreviousData:s,onError:o,onData:c,onWillExecute:u,failureToastOptions:l,...f}=r||{},m={initialData:a,execute:i,keepPreviousData:s,onError:o,onData:c,onWillExecute:u,failureToastOptions:l},b=S(t||dt),p=S(n||ht),h=(0,d.useRef)(null),x=(0,d.useRef)(null),E=typeof e=="function"?e({page:0}):void 0;(!h.current||typeof x.current>"u"||x.current!==E)&&(h.current=e),x.current=E;let P=(0,d.useRef)(null),v=(0,d.useCallback)((C,U)=>async G=>{let K=await fetch(C(G),{signal:P.current?.signal,...U}),H=await b.current(K);return p.current?.(H)},[b,p]),w=(0,d.useCallback)(async(C,U)=>{let G=await fetch(C,{signal:P.current?.signal,...U}),K=await b.current(G);return p.current(K)?.data},[b,p]),I=(0,d.useMemo)(()=>x.current?v:w,[x,w,v]);return ct(I,[h.current,f],{...m,internal_cacheKeySuffix:x.current+Y(p.current)+Y(b.current),abortable:P})}var Q=e=>!!e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function",re=Symbol.for("signal-exit emitter"),ae=class{constructor(){if(this.emitted={afterExit:!1,exit:!1},this.listeners={afterExit:[],exit:[]},this.count=0,this.id=Math.random(),te[re])return te[re];Object.defineProperty(te,re,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(r,t){this.listeners[r].push(t)}removeListener(r,t){let n=this.listeners[r],a=n.indexOf(t);a!==-1&&(a===0&&n.length===1?n.length=0:n.splice(a,1))}emit(r,t,n){if(this.emitted[r])return!1;this.emitted[r]=!0;let a=!1;for(let i of this.listeners[r])a=i(t,n)===!0||a;return r==="exit"&&(a=this.emit("afterExit",t,n)||a),a}},se=class{onExit(){return()=>{}}load(){}unload(){}},ie=class{#o;#t;#e;#s;#i;#a;#n;#r;constructor(r){this.#o=process.platform==="win32"?"SIGINT":"SIGHUP",this.#t=new ae,this.#a={},this.#n=!1,this.#r=[],this.#r.push("SIGHUP","SIGINT","SIGTERM"),globalThis.process.platform!=="win32"&&this.#r.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),globalThis.process.platform==="linux"&&this.#r.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT"),this.#e=r,this.#a={};for(let t of this.#r)this.#a[t]=()=>{let n=this.#e.listeners(t),{count:a}=this.#t,i=r;if(typeof i.__signal_exit_emitter__=="object"&&typeof i.__signal_exit_emitter__.count=="number"&&(a+=i.__signal_exit_emitter__.count),n.length===a){this.unload();let s=this.#t.emit("exit",null,t),o=t==="SIGHUP"?this.#o:t;s||r.kill(r.pid,o)}};this.#i=r.reallyExit,this.#s=r.emit}onExit(r,t){if(!Q(this.#e))return()=>{};this.#n===!1&&this.load();let n=t?.alwaysLast?"afterExit":"exit";return this.#t.on(n,r),()=>{this.#t.removeListener(n,r),this.#t.listeners.exit.length===0&&this.#t.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#n){this.#n=!0,this.#t.count+=1;for(let r of this.#r)try{let t=this.#a[r];t&&this.#e.on(r,t)}catch{}this.#e.emit=(r,...t)=>this.#l(r,...t),this.#e.reallyExit=r=>this.#c(r)}}unload(){this.#n&&(this.#n=!1,this.#r.forEach(r=>{let t=this.#a[r];if(!t)throw new Error("Listener not defined for signal: "+r);try{this.#e.removeListener(r,t)}catch{}}),this.#e.emit=this.#s,this.#e.reallyExit=this.#i,this.#t.count-=1)}#c(r){return Q(this.#e)?(this.#e.exitCode=r||0,this.#t.emit("exit",this.#e.exitCode,null),this.#i.call(this.#e,this.#e.exitCode)):0}#l(r,...t){let n=this.#s;if(r==="exit"&&Q(this.#e)){typeof t[0]=="number"&&(this.#e.exitCode=t[0]);let a=n.call(this.#e,r,...t);return this.#t.emit("exit",this.#e.exitCode,null),a}else return n.call(this.#e,r,...t)}},ne=null,pt=(e,r)=>(ne||(ne=Q(process)?new ie(process):new se),ne.onExit(e,r));function mt(e,{timeout:r}={}){let t=new Promise((o,c)=>{e.on("exit",(u,l)=>{o({exitCode:u,signal:l,timedOut:!1})}),e.on("error",u=>{c(u)}),e.stdin&&e.stdin.on("error",u=>{c(u)})}),n=pt(()=>{e.kill()});if(r===0||r===void 0)return t.finally(()=>n());let a,i=new Promise((o,c)=>{a=setTimeout(()=>{e.kill("SIGTERM"),c(Object.assign(new Error("Timed out"),{timedOut:!0,signal:"SIGTERM"}))},r)}),s=t.finally(()=>{clearTimeout(a)});return Promise.race([i,s]).finally(()=>n())}var oe=class extends Error{constructor(){super("The output is too big"),this.name="MaxBufferError"}};function gt(e){let{encoding:r}=e,t=r==="buffer",n=new j.default.PassThrough({objectMode:!1});r&&r!=="buffer"&&n.setEncoding(r);let a=0,i=[];return n.on("data",s=>{i.push(s),a+=s.length}),n.getBufferedValue=()=>t?Buffer.concat(i,a):i.join(""),n.getBufferedLength=()=>a,n}async function we(e,r){let t=gt(r);return await new Promise((n,a)=>{let i=s=>{s&&t.getBufferedLength()<=Ee.constants.MAX_LENGTH&&(s.bufferedData=t.getBufferedValue()),a(s)};(async()=>{try{await(0,Re.promisify)(j.default.pipeline)(e,t),n()}catch(s){i(s)}})(),t.on("data",()=>{t.getBufferedLength()>8e7&&i(new oe)})}),t.getBufferedValue()}async function ke(e,r){e.destroy();try{return await r}catch(t){return t.bufferedData}}async function bt({stdout:e,stderr:r},{encoding:t},n){let a=we(e,{encoding:t}),i=we(r,{encoding:t});try{return await Promise.all([n,a,i])}catch(s){return Promise.all([{error:s,exitCode:null,signal:s.signal,timedOut:s.timedOut||!1},ke(e,a),ke(r,i)])}}function yt(e){let r=typeof e=="string"?`
`:10,t=typeof e=="string"?"\r":13;return e[e.length-1]===r&&(e=e.slice(0,-1)),e[e.length-1]===t&&(e=e.slice(0,-1)),e}function xe(e,r){return e.stripFinalNewline?yt(r):r}function $t({timedOut:e,timeout:r,signal:t,exitCode:n}){return e?`timed out after ${r} milliseconds`:t!=null?`was killed with ${t}`:n!=null?`failed with exit code ${n}`:"failed"}function wt({stdout:e,stderr:r,error:t,signal:n,exitCode:a,command:i,timedOut:s,options:o,parentError:c}){let l=`Command ${$t({timedOut:s,timeout:o?.timeout,signal:n,exitCode:a})}: ${i}`,f=t?`${l}
${t.message}`:l,m=[f,r,e].filter(Boolean).join(`
`);return t?t.originalMessage=t.message:t=c,t.message=m,t.shortMessage=f,t.command=i,t.exitCode=a,t.signal=n,t.stdout=e,t.stderr=r,"bufferedData"in t&&delete t.bufferedData,t}function kt({stdout:e,stderr:r,error:t,exitCode:n,signal:a,timedOut:i,command:s,options:o,parentError:c}){if(t||n!==0||a!==null)throw wt({error:t,exitCode:n,signal:a,stdout:e,stderr:r,command:s,timedOut:i,options:o,parentError:c});return e}async function le(e,r,t){if(process.platform!=="darwin")throw new Error("AppleScript is only supported on macOS");let{humanReadableOutput:n,language:a,timeout:i,...s}=Array.isArray(r)?t||{}:r||{},o=n!==!1?[]:["-ss"];a==="JavaScript"&&o.push("-l","JavaScript"),Array.isArray(r)&&o.push("-",...r);let c=Se.default.spawn("osascript",o,{...s,env:{PATH:"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin"}}),u=mt(c,{timeout:i??1e4});c.stdin.end(e);let[{error:l,exitCode:f,signal:m,timedOut:b},p,h]=await bt(c,{encoding:"utf8"},u),x=xe({stripFinalNewline:!0},p),E=xe({stripFinalNewline:!0},h);return kt({stdout:x,stderr:E,error:l,exitCode:f,signal:m,timedOut:b,command:"osascript",options:t,parentError:new Error})}var B=require("fs"),ee=require("node:os"),Ue=O(require("node:path")),_e=(0,ee.platform)(),ue=_e==="win32",xt=_e==="darwin";if(!ue&&!xt)throw new Error("Unsupported operating system");function Te(e,r,t,n){return e=e.replace(/currentColor/g,n),`<svg width="${r}" height="${t}" viewBox="0 0 ${r} ${t}" xmlns="http://www.w3.org/2000/svg">${e}</svg>`}function Le(e){return`data:image/svg+xml,${e}`}function Oe(e,r){return`https://api.iconify.design/${e}/${r}.svg`}async function fe(e,r){let t=(0,ee.tmpdir)(),n=Ue.default.join(t,"/raycast-iconify");if(!(0,B.existsSync)(n))if(ue)try{(0,B.mkdirSync)(n,{recursive:!0})}catch(o){return D(o,{title:"Unable to create temporary directory"}),!1}else await le(`
        set file_path to "${n}"
        set file_path to do shell script "echo " & quoted form of file_path & " | iconv -f utf-8 -t utf-8"
        set file_path to file_path as text

        do shell script "mkdir -p " & quoted form of file_path
      `);let a=n,s=a.endsWith("/")?`${a}${r}.svg`:`${a}/${r}.svg`;if(ue)try{(0,B.writeFileSync)(s,e,{encoding:"utf-8"})}catch(o){return D(o,{title:"Unable to write file to disk"}),!1}else{let o=e.replace(/"/g,'\\"');await le(`
        set svg to "${o}"
        set svg to do shell script "echo " & quoted form of svg & " | iconv -f utf-8 -t utf-8"
        set svg to svg as text
  
        set file_path to "${s}"
        set file_path to do shell script "echo " & quoted form of file_path & " | iconv -f utf-8 -t utf-8"
        set file_path to file_path as text
  
        set fileRef to open for access file_path with write permission
        write svg to fileRef
        close access fileRef
      `)}return await Pe.Clipboard.copy({file:s}),!0}var J=require("react");var de="https://api.iconify.design";function he(e,r,t){let n=new URL(r,e).toString();if(t){let a=new URLSearchParams(t).toString();return n+`?${a}`}return n}async function vt(e,r,{params:t,signal:n}={}){let a=he(e,r,t),i=await fetch(a,{signal:n});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);return i.json()}var Ne=async(e,r,t,n)=>{let a=await vt(de,`/${e}.json`,{params:{icons:t.join(",")},signal:n});return t.filter(i=>a.icons[i]!==void 0).map(i=>{let s=a.icons[i];return{set:{id:e,title:r},id:i,width:a.width,height:a.height,body:s.body}})};var De=e=>{let r=(0,J.useRef)(),t=(0,J.useMemo)(()=>he(de,"/search",{query:e,limit:"100"}),[e]),{data:n,error:a,isLoading:i}=Ae(t,{execute:!!e,onError:l=>{D(l,{title:"Error while searching for icons"})}}),s=(0,J.useMemo)(()=>{let l={},f=(n?.icons||[]).map(p=>p.split(":")),m=n?.collections||{};for(let[p,h]of f)l[p]||(l[p]=[]),l[p].push(h);let b=[];for(let p in l){let h=l[p],x=m[p];b.push({setId:p,name:x.name,ids:h})}return b},[n]),{data:o,error:c,isLoading:u}=ce(async l=>Promise.all(l.map(f=>Ne(f.setId,f.name,f.ids,r?.current?.signal))).then(f=>f.flat()),[s],{abortable:r,onError:l=>{D(l,{title:"Error while searching for icons"})}});return{data:o||[],error:a||c,isLoading:i||u}};var k=require("@raycast/api");function F(e){return e.split(/[-_]/).map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join("")}function St(e){let r=F(e);return r.charAt(0).toLowerCase()+r.slice(1)}var Fe={"icon-name":e=>e.iconId,IconName:e=>F(e.iconId),"set-name:icon-name":e=>`${e.setId}:${e.iconId}`,"set-name-icon-name":e=>`${e.setId.toLowerCase()}-${e.iconId.toLowerCase()}`,"set-name/icon-name":e=>`${e.setId.toLowerCase()}/${e.iconId.toLowerCase()}`,"set-name--icon-name":e=>`${e.setId.toLowerCase()}--${e.iconId.toLowerCase()}`,setNameIconName:e=>`${St(e.setId)}${F(e.iconId)}`,SetNameIconName:e=>`${F(e.setId)}${F(e.iconId)}`,"<SetNameIconName />":e=>`<${F(e.setId)}${F(e.iconId)} />`,"<set-name-icon-name />":e=>`<${e.setId.toLowerCase()}-${e.iconId.toLowerCase()} />`,"i-set-name:icon-name":e=>`i-${e.setId.toLowerCase()}:${e.iconId.toLowerCase()}`,"i-set-name-icon-name":e=>`i-${e.setId.toLowerCase()}-${e.iconId.toLowerCase()}`,"icon-[set-name--icon-name]":e=>`icon-[${e.setId.toLowerCase()}--${e.iconId.toLowerCase()}]`};var $=require("react/jsx-runtime"),{primaryAction:T,iconNameFormat:Et}=(0,k.getPreferenceValues)(),Me=({id:e,setId:r,dataURIIcon:t,svgIcon:n,children:a})=>{let i=r?Fe[Et]({setId:r,iconId:e}):e,s=(0,$.jsx)(k.Action.Paste,{title:"Paste SVG String",content:n}),o=(0,$.jsx)(k.Action.CopyToClipboard,{title:"Copy SVG String",content:n}),c=(0,$.jsx)(k.Action,{title:"Paste SVG File",icon:k.Icon.Clipboard,onAction:async()=>{if(!await fe(n,e))return;let{file:h}=await k.Clipboard.read();h&&k.Clipboard.paste({file:h.replace("file://","")})}}),u=(0,$.jsx)(k.Action,{title:"Copy SVG File",icon:k.Icon.Clipboard,onAction:async()=>{await fe(n,e)&&await(0,k.showToast)({title:"Copied to clipboard",message:"The SVG file has been copied to the clipboard.",style:k.Toast.Style.Success})}}),l=r?(0,$.jsx)(k.Action.Paste,{title:"Paste Name",content:i}):null,f=r?(0,$.jsx)(k.Action.CopyToClipboard,{title:"Copy Name",content:i}):null,m=r?(0,$.jsx)(k.Action.CopyToClipboard,{title:"Copy URL",content:Oe(r,e)}):null,b=(0,$.jsx)(k.Action.CopyToClipboard,{title:"Copy Data URI",content:t});return(0,$.jsxs)(k.ActionPanel,{children:[T==="paste"&&(0,$.jsxs)($.Fragment,{children:[s,o,c,u,l,f,m,b]}),T==="copy"&&(0,$.jsxs)($.Fragment,{children:[o,s,c,u,l,f,m,b]}),T==="pasteName"&&(0,$.jsxs)($.Fragment,{children:[l,s,o,c,u,f,m,b]}),T==="pasteFile"&&(0,$.jsxs)($.Fragment,{children:[c,s,o,u,l,f,m,b]}),T==="copyFile"&&(0,$.jsxs)($.Fragment,{children:[u,s,o,c,l,f,m,b]}),T==="copyName"&&(0,$.jsxs)($.Fragment,{children:[f,s,o,c,u,l,m,b]}),T==="copyURL"&&(0,$.jsxs)($.Fragment,{children:[m,s,o,c,u,l,f,b]}),T==="copyDataURI"&&(0,$.jsxs)($.Fragment,{children:[b,s,o,c,u,l,f,m]}),a]})};var Ve=require("@raycast/api"),ze=require("react/jsx-runtime"),We=({error:e,children:r})=>e?(0,ze.jsx)(Ve.Detail,{markdown:`# Error

An error occurred while loading the data. Please try the following things:
- Reinstall the extension
- Clear the cache of the extension
- Check your internet connection

Reported error: \`${e.message}\``}):r;var M=require("react/jsx-runtime"),{iconColor:je,customColor:pe}=(0,A.getPreferenceValues)();function Rt(){let[e,r]=(0,Be.useState)(""),{data:t,isLoading:n,error:a}=De(e);function i(s,o){return s.length===0||o?"Type something to get started":"Try another query"}return(0,M.jsx)(We,{error:a,children:(0,M.jsxs)(A.Grid,{throttle:!0,columns:8,inset:A.Grid.Inset.Medium,isLoading:n,onSearchTextChange:r,children:[(0,M.jsx)(A.Grid.EmptyView,{title:"No results",description:i(e,n)}),t.map(s=>{let{set:o,id:c,body:u,width:l,height:f}=s,{id:m,title:b}=o,p=Te(u,l,f,je==="customColor"&&pe&&/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(pe)?pe:je),h=Le(p);return(0,M.jsx)(A.Grid.Item,{content:{source:h,tintColor:u.includes("currentColor")?A.Color.PrimaryText:null},title:c,subtitle:b,actions:(0,M.jsx)(Me,{id:c,setId:m,svgIcon:p,dataURIIcon:h})},`${m}:${c}`)})]})})}var It=Rt;
